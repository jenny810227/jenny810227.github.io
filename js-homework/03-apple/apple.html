<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">

    <style>
        /* 清除bootstrap focus */
        .btn:focus,
        .btn:active:focus,
        .btn.active:focus,
        .btn.focus,
        .btn.active.focus,
        .btn:active.focus,
        .button:focus{
            outline:none !important;
            box-shadow: none !important;
        }

    </style>
    <script src="https://kit.fontawesome.com/7331b936ff.js" crossorigin="anonymous"></script>

</head>
<body>
    <section class=" apple-nav d-flex justify-content-center align-items-center bg-dark">
        <ul class=" nav-bar list-unstyled d-flex m-0">
            <li><a href="#iphone13" class="btn btn-dark product">{{iphone87}}</a></li>
            <li><a href="#iphone13" class="btn btn-dark product">{{iphone87}}</a></li>
            <li><a href="#iphone13" class="btn btn-dark product">{{iphone87}}</a></li>
        </ul>
    </section>
    <section class="apple-info container d-flex justify-content-between align-items-center">
        <h3 class="m-0 product-type">{{iphone87}}</h3>
        <strong class="m-0 price-top">{{$$9.999}}</strong>
    </section>
    <section class="container py-3">
        <div class="row">
            <div class="col-12 col-md-6">
                <div class="img-box px-4  py-5">
                    <img class="product-img w-100" src="https://picsum.photos/id/684/400/400">
                </div>
            </div>
            <div class="col-12 col-md-6">
                <h1><strong class="product-name">{{Iphone87}}</strong></h1>
                <div class="accordion" id="accordionPanelsStayOpenExample">
                    <div class="accordion-item">
                        <h2 class="accordion-header" id="panelsStayOpen-headingOne">
                            <button class="accordion-button" type="button" data-bs-toggle="collapse"
                                data-bs-target="#panelsStayOpen-color" aria-expanded="true"
                                aria-controls="panelsStayOpen-color">
                                {{外觀}}
                            </button>
                        </h2>
                        <div id="panelsStayOpen-color" class="accordion-collapse collapse show"
                            aria-labelledby="panelsStayOpen-headingOne">
                            <div class="accordion-body">
                                <h5><strong>外觀</strong></h5>
                                <div class="row color-area">
                                    <div class="col-6 mb-3">
                                        <button class="btn color-btn w-100">
                                            <div class="py-4 d-flex flex-column justify-content-center align-items-center">
                                                <i class="fas fa-circle"></i>
                                                <span class="color-name">{{黑色}}</span>
                                            </div>
                                        </button>
                                    </div>
                                    <div class="col-6 mb-3">
                                        <button class="btn color-btn w-100">
                                            <div class="py-4 d-flex flex-column justify-content-center align-items-center">
                                                <i class="fas fa-circle"></i>
                                                <span class="color-name">{{黑色}}</span>
                                            </div>
                                        </button>
                                    </div>
                                    <div class="col-6 mb-3">
                                        <button class="btn color-btn w-100">
                                            <div class="py-4 d-flex flex-column justify-content-center align-items-center">
                                                <i class="fas fa-circle"></i>
                                                <span class="color-name">{{黑色}}</span>
                                            </div>
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="accordion" id="accordionPanelsStayOpenExample">
                    <div class="accordion-item">
                        <h2 class="accordion-header" id="panelsStayOpen-headingOne">
                            <button class="accordion-button" type="button" data-bs-toggle="collapse"
                                data-bs-target="#panelsStayOpen-spec" aria-expanded="true"
                                aria-controls="panelsStayOpen-spec">
                                {{容量}}
                            </button>
                        </h2>
                        <div id="panelsStayOpen-spec" class="accordion-collapse collapse show"
                            aria-labelledby="panelsStayOpen-headingOne">
                            <div class="accordion-body">
                                <h5><strong>容量</strong></h5>
                                <div class="row spec-area">
                                    <div class="col-6 mb-3">
                                        <button class="btn spec-btn w-100">
                                            <div class="py-4 d-flex flex-column justify-content-center align-items-center">
                                                <span class="spec-name">{{256GB}}</span>
                                                <span class="fit">{{$22900起}}</span>
                                            </div>
                                        </button>
                                    </div>
                                    <div class="col-6 mb-3">
                                        <button class="btn spec-btn w-100">
                                            <div class="py-4 d-flex flex-column justify-content-center align-items-center">
                                                <span class="spec-name">{{512GB}}</span>
                                                <span class="fit">{{$27900}}</span>
                                            </div>
                                        </button>
                                    </div>
                                    <div class="col-6 mb-3">
                                        <button class="btn spec-btn w-100">
                                            <div class="py-4 d-flex flex-column justify-content-center align-items-center">
                                                <span class="spec-name">{{1TB}}</span>
                                                <span class="fit">{{$32900}}</span>
                                            </div>
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
    

    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.5/dist/umd/popper.min.js" integrity="sha384-Xe+8cL9oJa6tN/veChSP7q+mnSPaj5Bcu9mPX5F5xIGE0DVittaqT5lorf0EI7Vk" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/js/bootstrap.min.js" integrity="sha384-kjU+l4N0Yf4ZOJErLsIcvOU2qSb74wXpOhqTvwVx3OElZRweTnQ6d31fXEoRD1Jy" crossorigin="anonymous"></script>

    <script>
        const productList = [
            {
                name: 'Iphone13',
                price: 22900,
                mainImg: 'https://picsum.photos/id/684/400/400',
                colorList: [
                    { name: '紅色', color: '#ff0000', img: 'https://picsum.photos/id/300/400/400' },
                    { name: '綠色', color: '#00ff00', img: 'https://picsum.photos/id/400/400/400' },
                    { name: '藍色', color: '#0000ff', img: 'https://picsum.photos/id/500/400/400' }
                ],
                spec: [
                    {
                        name: '容量',
                        specDetail: [
                            { name: '128GB', fit: 0 },
                            { name: '256GB', fit: 3500 },
                            { name: '512GB', fit: 10500 }
                        ]
                    },
                    {
                        name: '連線能力',
                        specDetail: [
                            { name: 'WI-FI', fit: 0 },
                            { name: 'Wi-Fi+行動網路', fit: 5000 }
                        ]
                    }
                ]
            }
        ]
    
        const navbar=document.querySelector('.nav-bar')
        const productType=document.querySelector('.product-type')
        const priceTop=document.querySelector('.price-top')
        const productName=document.querySelector('.product-name')
        const productImg=document.querySelector('.product-img')

        const colorAreaBtn=document.querySelector('[aria-controls="panelsStayOpen-color"]')
        const colorArea=document.querySelector('.color-area')

        const accordionBox=document.querySelector('.accordion')

        window.onload=function(){
            showNavbar()
            selectProduct(productList[0])
        }

        function showNavbar(){
            const list=productList.map(p=>p.name)
            list.forEach((p,index)=>{
                const li=document.createElement('li') 
                const a=document.createElement('a')
                a.innerText=p
                a.href=`#${p}`
                a.classList.add('btn','btn-dark','product')
                a.onclick=function(){
                    selectProduct(productList[index])                   

                }

                li.appendChild(a)
                navbar.appendChild(li)
            })  
        }

        function selectProduct(product){
            productType.innerText=product.name
            productName.innerText=product.name
            productImg.src=product.mainImg
            priceTop.innerText=`${product.price}`

            //color
            product.colorList.forEach(item=>{
                const div =document.createElement('div')
                div.classList.add('col-6','mb-3')
                const btn=document.createElement('button')
                btn.classList.add('btn','color-btn','w-100')
                const btnDiv=document.createElement('div')
                btnDiv.classList.add('py-4','d-flex','flex-column','justify-content-center','align-items-center')

                btn.onclick=function(){
                    productImg.src=item.img

                    colorAreaBtn.innerText=item.name
                    colorAreaBtn.click()
                }
                    
                const i=document.createElement('i')
                i.classList.add('fas','fa-circle')
                i.style.color=item.color

                const span=document.createElement('span')
                span.classList.add('color-name')
                span.innerText=item.name

                btnDiv.appendChild(i)
                btnDiv.appendChild(span)
                btn.appendChild(btnDiv)
                div.appendChild(btn)
                colorArea.appendChild(div)

            })

            product.spec.forEach(item=>{
                const accordionIem=document.createElement('div')
                accordionIem.classList.add('accordion-item')
                const accordionTitle=document.createElement('h2')
                accordionTitle.classList.add('accordion-header')
                const accordionBtn=document.createElement('button')
                accordionBtn.innerText=item.name
                accordionBtn.classList.add('accordion-button')
                accordionBtn.setAttribute('type','button')
                accordionBtn.setAttribute('data-bs-toggle','collapse')
                accordionBtn.setAttribute('data-bs-target',`#panelsStayOpen${item.name}`)
                accordionBtn.setAttribute('aria-expanded','true')
                accordionBtn.setAttribute('aria-controls',`panelsStayOpen${item.name}`)

                accordionTitle.appendChild(accordionBtn)

                const accordionContent=document.createElement('div')
                accordionContent.setAttribute('id',`panelsStayOpen-${item.name}`)
                accordionContent.classList.add('accordion-collapse','collapse','show')
                const accordionBody=document.createElement('div')
                accordionBody.classList.add('accordion-body')
                const h5=document.createElement('h5')
                const strong=document.createElement('strong')
                strong.innerText=item.name
                h5.append(strong)

                const specDiv=document.createElement('div')
                specDiv.classList.add('row')
                item.specDetail.forEach(specItem=>{
                    const div=document.createElement('div')
                    div.classList.add('col-6','mb-3')
                    const btn=document.createElement('button')
                    btn.classList.add('btn','w-100')

                    const btnDiv=document.createElement('div')
                    btnDiv.classList.add('py-4','d-flex','flex-column','justify-content-center','align-items-center')

                    const p=document.createElement('p')
                    p.classList.add('spec-val','m-0')
                    p.innerText=specItem.name
                    const span=document.createElement('span')
                    span.classList.add('fit')
                    span.innerText=`NT${product.price+specItem.fit}`
                    btnDiv.appendChild(p)
                    btnDiv.appendChild(span)
                    btn.appendChild(btnDiv)
                    div.appendChild(btn)
                    specDiv.appendChild(div)
                })

                accordionBody.appendChild(h5)
                accordionBody.appendChild(specDiv)
                accordionContent.appendChild(accordionBody)
                accordionContent.appendChild(accordionTitle)
                accordionIem.appendChild(accordionContent)
                accordionBox.appendChild(accordionIem)
                







            })


        }



    </script>
</body>
</html>